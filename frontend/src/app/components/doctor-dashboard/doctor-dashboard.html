<div class="liquid-container">
  
  <div class="card" style="height: 100%;">
    
    <div class="card-header">
      <h3><span class="material-icons">calendar_today</span> Weekly Timetable</h3>
    </div>

    <div class="week-controls">
      <button class="btn-icon" 
              (click)="changeWeek(-1)" 
              title="Previous Week"
              [disabled]="!canGoBack"
              [style.opacity]="!canGoBack ? '0.3' : '1'"
              [style.cursor]="!canGoBack ? 'not-allowed' : 'pointer'">
        <span class="material-icons">chevron_left</span>
      </button>
      
      <div class="week-range">
        {{ weekStart | date:'MMMM d' }} â€“ {{ getWeekDate(6) | date:'MMMM d, y' }}
      </div>
      
      <button class="btn-icon" (click)="changeWeek(1)" title="Next Week">
        <span class="material-icons">chevron_right</span>
      </button>
    </div>

    <div class="card-body-scroll" style="padding: 0;">
      <table class="timetable">
        <thead>
          <tr>
            <th class="time-col sticky-col">Time</th>
            <th *ngFor="let d of weekDays; let i = index">
              <div class="day-header">
                <span class="day-name">{{ d }}</span>
                <span class="day-date">{{ getWeekDate(i) | date:'dd MMM' }}</span>
              </div>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let time of times">
            <td class="time-col sticky-col">{{ time }}</td>
            <td *ngFor="let dayIndex of [0,1,2,3,4,5,6]">
              
              <ng-container *ngIf="getSlot(dayIndex, time) as slot; else emptyCell">
                <div class="slot" [ngClass]="{
                    'slot-booked': isBooked(slot),
                    'slot-free': !isBooked(slot) && !isPast(slot),
                    'slot-past': isPast(slot)
                  }" title="{{ slotLabel(slot) }}">
                  
                  <div class="slot-info">
                    {{ slotStatus(slot) }}
                  </div>
                </div>
              </ng-container>

              <ng-template #emptyCell>
                <div class="slot empty-slot"></div>
              </ng-template>

            </td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>
</div>